// **********************************************************************
//
// Generated by the IDL3 Translator
//
// Copyright (c) 2001-2004
// StarMiddleware Group
// www.StarMiddleware.net
//
// All Rights Reserved
//
// Author: Huang Jie        huangjie@email.com
// Author: Chang Junsheng   cjs7908@163.com
// Author: Zhen Xianrong
//
// **********************************************************************


#include <CORBA.h>
#include <CIFHook.h>
#include <Dinner_impl.h>

#ifdef WIN32
#ifdef ORBacus
JTCInitialize* pJTCInitialize;
#endif
#ifdef StarBus
MTLInitialize* pMTLInitialize;
#endif

BOOL APIENTRY DllMain( HANDLE hModule, 
         DWORD  reason, 
         LPVOID lpReserved)
{
     switch (reason)
     {
           case DLL_PROCESS_ATTACH:
#ifdef ORBacus
                pJTCInitialize = new JTCInitialize();
#endif
#ifdef StarBus
                pMTLInitialize = new MTLInitialize();
#endif
                break;
           case DLL_THREAD_ATTACH:
                break;
           case DLL_THREAD_DETACH:
                break;
           case DLL_PROCESS_DETACH:
#ifdef ORBacus
                delete pJTCInitialize;
#endif
#ifdef StarBus
                delete pMTLInitialize;
#endif
                break;
     }
     return TRUE;
}


extern "C"
{
__declspec(dllexport) PortableServer::Servant 
createDinnerPhilosopherHome(Container::CIFHook_ptr cifHook);

__declspec(dllexport) PortableServer::Servant 
createDinnerCutleryHome(Container::CIFHook_ptr cifHook);

};

#else

extern "C"
{
PortableServer::Servant  
createDinnerPhilosopherHome(Container::CIFHook_ptr cifHook);

PortableServer::Servant  
createDinnerCutleryHome(Container::CIFHook_ptr cifHook);

};
#endif

PortableServer::Servant
createDinnerPhilosopherHome(Container::CIFHook_ptr cifHook) 
{
    return new Dinner::PhilosopherHome_impl(cifHook);
}

PortableServer::Servant
createDinnerCutleryHome(Container::CIFHook_ptr cifHook) 
{
    return new Dinner::CutleryHome_impl(cifHook);
}

